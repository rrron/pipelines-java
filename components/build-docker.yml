parameters:
- name: personaltag
  type: object
  default: {}
- name: personalDockerfile
  type: object
  default: {}
steps:
- ${{ each dfl in parameters.personalDockerfile AND each tag in parameters.personaltag }}:
  - task: Docker@2
    inputs:
      containerRegistry: 'DockerHub'
      repository: 'nginx'
      command: 'build'
      Dockerfile: '${{ dfl }}'
      buildContext: ''
      tags: '${{ parameters.tag }}'
      addPipelineData: false
      addBaseImageData: false
    displayName: Docker build ${{ parameters.personaltag }} with '${{ dfl }}'

# - name: dockerfilename
#   type: object
#   default: 
#     - "dockerfolder/Dockerfile"
#     - "dockerfolder/DockerfileHttpd"
# - name: personaltag
#   type: object
#   default:
#     - "$(Build.BuildId)"
#     - "$(Build.BuildNumber)"
