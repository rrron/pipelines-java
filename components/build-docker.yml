parameters:
- name: service
  type: object
  default: {}
- name: personalDockerfile
  type: object
  default: {}
- name: build_Context
  type: object
  default: {}
steps:
- ${{ each srvc in parameters.service }}:
      - task: Docker@2
        inputs:
          containerRegistry: 'DockerHub'
          - ${{ each blx in parameters.build_Context }}:
          repository: '${{ srvc }}'
          command: 'build'
          - ${{ each dfl in parameters.personalDockerfile }}:
          Dockerfile: '${{ dfl }}'
          buildContext: '${{ blx }}'
          tags: '$(Build.BuildId)'
          addPipelineData: false
          addBaseImageData: false
        displayName: Docker build ${{ srvc }} with '${{ dfl }}'

# - name: dockerfilename
#   type: object
#   default: 
#     - "dockerfolder/Dockerfile"
#     - "dockerfolder/DockerfileHttpd"
# - name: personaltag
#   type: object
#   default:
#     - "$(Build.BuildId)"
#     - "$(Build.BuildNumber)"
